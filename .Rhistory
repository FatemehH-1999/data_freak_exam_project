#loading libraries
library(tidyverse)
library(here)
#loading libraries
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_tidy1.txt"), delim = " ")
#exploring tidy version of the data se
glimpse(data2)
View(data2)
data2 <-
data2 %>%
mutate(pan_week = pan_day/7)
data2
data2 <-
data2 %>%
mutate(multi_ct_result_orderset = ct_result*orderset) %>%
drop_na(multi_ct_result_orderset)
data2
View(data2)
arrange_ID %>%
data2 %>%
arrange(ID)
arrange_ID <-
data2 %>%
arrange(ID)
arrange_ID
View(arrange_ID)
data_patrik <- data2 %>%
distinct() %>%
pivot_wider(
names_from = time_measurement,
values_from = value)
data_patrik <- data2 %>%
mutate(rec_ver_tat_level = if_else(rec_ver_tat <= 100, "Low", "High"))
View(data2)
View(data_patrik)
data_patrik <- data_patrik %>%
mutate(rec_ver_tat_level = if_else(rec_ver_tat <= 100, "Low", "High"))
data_patrik
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_join.txt"), delim = " ")
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_join.txt"), delim = " ")
data_join <- read_delim(here("data", "exam_data_join.txt"), delim = " ")
data_join <- data_patrik %>%
left_join(data_patrik,data_join, by = "ID" )
data_join
View(data_join)
data2 <-
data2 %>%
arrange(ID)
data_join <- data_patrik %>%
left_join(data2, data_join, by = "ID" )
#loading libraries
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_tidy1.txt"), delim = " ")
#exploring tidy version of the data se
glimpse(data2)
data2 <-
data2 %>%
mutate(pan_week = pan_day/7)
data2
data2 <-
data2 %>%
mutate(multi_ct_result_orderset = ct_result*orderset) %>%
drop_na(multi_ct_result_orderset)
data2
data2 <-
data2 %>%
arrange(ID)
arrange_ID
data2 <-
data2 %>%
arrange(ID)
data2
data2 <- data2 %>%
distinct() %>%
pivot_wider(
names_from = time_measurement,
values_from = value)
data2 <- data2 %>%
mutate(rec_ver_tat_level = if_else(rec_ver_tat <= 100, "Low", "High"))
data2
data2 <- data2 %>%
left_join(data2, exam_data_join, by = c("ID" = "id" ))
data2
View(data2)
data2
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id" ))
data2 <- left_join(data2, data_join, by = c("ID" = "id" ))
exam_data_join <- read_delim(here("data", "exam_data_join.txt"), delim = " ")
data2 <- left_join(data2, data_join, by = c("ID" = "id" ))
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id" ))
View(data2)
data2 <- left_join(data2, exam_data_join, by = c("ID" == "id" ))
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id" ))
data2 <- left_join(data2, exam_data_join, join_by = c("ID" == "id" ))
data2 <- left_join(data2, exam_data_join, join_by = c( ID == id ))
data2 <- left_join(data2, exam_data_join, join_by = c( ID = id ))
data2 <- left_join(data2, exam_data_join, join_by = c( ID = id ))
data2 <- left_join(data2, exam_data_join, join_by( c(ID = id )))
data2 <- left_join(data2, exam_data_join, join_by( c(ID == id )))
data2 <- left_join(data2, exam_data_join, join_by( c("ID" == "id" )))
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id"))
View(exam_data_join)
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id antibody"))
View(exam_data_join)
exam_data_join <- read_delim(here("data", "exam_data_join.txt"), delim = "\t")
View(exam_data_join)
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id antibody"))
data2 <- left_join(data2, exam_data_join, by = c("ID" = "id"))
data2
View(exam_data_join)
View(data2)
View(data2)
#loading libraries
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_tidy1.txt"), delim = " ")
data2 <- read_delim(here("data", "exam_data_tidy1.txt"), delim = " ")
library(tidyverse)
library(here)
data1 <- read_delim(here("data", "exam_data.txt"), delim = "\t")
data1 %>%
glimpse()
data1 %>%
head()
data1 %>%
tail()
data1 %>%
summary()
skimr::skim(data1)
naniar::gg_miss_var(data1)
library(tidyverse)
library(here)
data1 <- read_delim(here("data", "exam_data.txt"), delim = "\t")
data1 %>%
glimpse()
data1 %>%
head()
data1 %>%
tail()
data1 %>%
summary()
skimr::skim(data1)
naniar::gg_miss_var(data1)
df <- data1 %>%
select(-row, -test_id, -demo_group)
df <- data1 %>%
select(-row, -1_test_id, -demo_group)
#Tidy, adjust, and explore
##renaming
#renaming
data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
df <- data1 %>%
select(-row, -_test_id, -demo_group)
df <- data1 %>%
select(-row, -test_id, -demo_group)
##renaming
data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
df <- data1 %>%
select(-row, -test_id, -demo_group)
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
df <- data1 %>%
select(-row, -`1_test_id`, -demo_group)
df
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df <- data1 %>%
mutate(rec_ver_tat_level = if_else(rec_ver_tat > 100, "High", "Low"))
View(df)
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df <- data1 %>%
mutate(rec_ver_tat_level = if_else( `time measurement`> 100, "High", "Low"))
df
View(df)
#A numeric column showing pan_day in weeks
df <- data1 %>%
mutate(pan_week = pan_day / 7)
library(tidyverse)
library(here)
data1 <- read_delim(here("data", "exam_data.txt"), delim = "\t")
#exploring exam data file
#overview of the data
data1 %>%
glimpse()
data1 %>%
head()
data1 %>%
tail()
data1 %>%
summary()
skimr::skim(data1)
naniar::gg_miss_var(data1)
##renaming
data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
data1 %>%
select(-row, -`1_test_id`, -demo_group)
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
data1 %>%
mutate(rec_ver_tat_level = if_else( `time measurement`> 100, "High", "Low"))
View(data1)
##renaming
df1 <- data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
df1
View(df1)
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
df2 <- data1 %>%
select(-row, -`1_test_id`, -demo_group)
df2
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
df2 <- df1 %>%
select(-row, -`1_test_id`, -demo_group)
##Remove unnecessary columns from your dataframe: row, test_id, demo_group
df2 <- df1 %>%
select(-row, -test_id, -demo_group)
df2
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df3 <- df2 %>%
mutate(rec_ver_tat_level = if_else( `time measurement`> 100, "High", "Low"))
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df3 <- df2 %>%
mutate(rec_ver_tat_level = if_else( time_measurement> 100, "High", "Low"))
df3
View(df3)
#A numeric column showing pan_day in weeks
df4 <- df3 %>%
mutate(pan_week =  / 7)
#A numeric column showing pan_day in weeks
df4 <- df3 %>%
mutate(pan_week = / 7)
#A numeric column showing pan_day in weeks
df4 <- df3 %>%
mutate(pan_week = pan_day / 7)
df4
View(df4)
#A column showing drive_thru_ind as Yes/No
df5 <- df4 %>%
mutate(drive_thru = if_else(drive_thru_ind == 1, "Yes", "No"))
df5
#A numeric column showing multiplication of ct_result and orderset for each person
df6 <- df5 %>%
mutate(ct_orderset_product = ct_result * orderset)
df6
View(df6)
#Set the order of columns as: id, age, gender and other columns
df7 <- df6 %>%
select(id, age, gender, everything())
#Set the order of columns as: id, age, gender and other columns
df7 <- df6 %>%
select(age, gender, everything())
View(df6)
View(df6)
#seperating gender_age column
df7 <- df6 %>%
separate(gender_age, into = c("gender", "age"), sep = "_") %>%
mutate(age = as.numeric(age))
df7
View(df7)
#seperating gender_age column
df7 <- df6 %>%
separate(gender_age, into = c("gender", "age"), sep = "-") %>%
mutate(age = as.numeric(age))
df7
View(df7)
#Set the order of columns as: id, age, gender and other columns
df8 <- df7 %>%
select(age, gender, everything())
df8
View(df8)
View(df1)
#Arrange ID column of your dataset in order of increasing number or alphabetically
df9 <- df1 %>%
arrange(row)
df9
View(df9)
View(df8)
library(tidyverse)
library(here)
data1 <- read_delim(here("data", "exam_data.txt"), delim = "\t")
#exploring exam data file
#overview of the data
data1 %>%
glimpse()
data1 %>%
head()
data1 %>%
tail()
data1 %>%
summary()
skimr::skim(data1)
naniar::gg_miss_var(data1)
##renaming
df1 <- data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
df1
View(df1)
df2 <- df1 %>%
select(-row, -test_id, -demo_group)
df2
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df3 <- df1 %>%
mutate(rec_ver_tat_level = if_else( time_measurement> 100, "High", "Low"))
df1
#A numeric column showing pan_day in weeks
df4 <- df3 %>%
mutate(pan_week = pan_day / 7)
df4
#A column showing drive_thru_ind as Yes/No
df5 <- df4 %>%
mutate(drive_thru = if_else(drive_thru_ind == 1, "Yes", "No"))
df5
#A numeric column showing multiplication of ct_result and orderset for each person
df6 <- df5 %>%
mutate(ct_orderset_product = ct_result * orderset)
df6
#seperating gender_age column
df7 <- df6 %>%
separate(gender_age, into = c("gender", "age"), sep = "-") %>%
mutate(age = as.numeric(age))
df7
#Set the order of columns as: id, age, gender and other columns
df8 <- df7 %>%
select(age, gender, everything())
df8
#Arrange ID column of your dataset in order of increasing number or alphabetically
df9 <- df1 %>%
arrange(row)
df9
#columns containing combined variables
df6 %>%
select(contains("age")) %>%
count()
#unique observations in the data set
df6 %>%
distinct(subject)
df6
#Check variable types
typeof(data1$clinic_name)
typeof(data1$`gender-age`)
#separating gender_age column
df7 <- df6 %>%
separate(gender_age, into = c("gender", "age"), sep = "-") %>%
mutate(age = as.numeric(age))
df7
#Set the order of columns as: id, age, gender and other columns
df8 <- df7 %>%
select(age, gender, everything())
df8
View(df9)
#Remove rows where any NA appears anywhere
df6 %>%
drop_na()
df6
View(df6)
#Remove rows where any NA appears anywhere
df9 %>%
drop_na()
df9
View(df9)
library(tidyverse)
library(here)
data1 <- read_delim(here("data", "exam_data.txt"), delim = "\t")
#exploring exam data file
#overview of the data
data1 %>%
glimpse()
data1 %>%
head()
data1 %>%
tail()
data1 %>%
summary()
skimr::skim(data1)
naniar::gg_miss_var(data1)
##renaming
df1 <- data1 %>%
rename(gender_age = `gender-age`, pan_day = `pan day`, time_measurement = `time measurement`, value = .value, test_id = `1_test_id` )
df1
#Create a set of new columns:
##A column showing whether rec_ver_tat is higher than 100 or not: values High/Low
df3 <- df1 %>%
mutate(rec_ver_tat_level = if_else( time_measurement> 100, "High", "Low"))
df3
#A numeric column showing pan_day in weeks
df4 <- df3 %>%
mutate(pan_week = pan_day / 7)
df4
View(df4)
#A column showing drive_thru_ind as Yes/No
df5 <- df4 %>%
mutate(drive_thru = if_else(drive_thru_ind == 1, "Yes", "No"))
df5
#A numeric column showing multiplication of ct_result and orderset for each person
df6 <- df5 %>%
mutate(ct_orderset_product = ct_result * orderset)
df6
#columns containing combined variables
df6 %>%
select(contains("age")) %>%
count()
#unique observations in the data set
df6 %>%
distinct(subject)
df6
#Remove rows where any NA appears anywhere
df6 %>%
drop_na()
df6
View(df6)
#separating gender_age column
df7 <- df6 %>%
separate(gender_age, into = c("gender", "age"), sep = "-") %>%
mutate(age = as.numeric(age))
df7
View(df7)
#Set the order of columns as: id, age, gender and other columns
df8 <- df7 %>%
select(age, gender, everything())
df8
#Arrange ID column of your dataset in order of increasing number or alphabetically
df9 <- df1 %>%
arrange(row)
df9
View(df9)
#Remove rows where any NA appears anywhere
df9 %>%
drop_na()
df9
View(df9)
# Check the dimensions and variable type of the tidied data
dim(df9)
glimpse(df9) # All variables are double
write_delim(
df9,
file = fileName,
delim = "\t"
)
write_delim(
df9,
file = df9,
delim = "\t"
)
write_delim(
df9,
file = fileName,   # ✅ use the path, not the dataframe
delim = "\t"
)
write_delim(
df9,
file = df9,   # ✅ use the path, not the dataframe
delim = "\t"
)
write_delim(
exam-data,
file = fileName,
delim = "\t"
)
write_delim(
df9,
file = fileName,
delim = "\t"
)
write_delim(
df9,
file = fileName,
delim = "\t"
)
write_delim(
df9,
delim = "\t"
)
write_delim(
df9,
file = fileName,   # ✅ specify the file path
delim = "\t"
)
# make sure the "data" folder exists
dir.create(here("data"), showWarnings = FALSE)
# path to the file you want to create
fileName <- here("data", "20250905-tidy-exam-data.txt")
# write df9 as a tab-delimited text file
write_delim(
df9,
file = fileName,   # <-- you need this argument
delim = "\t"
)
# make sure the "data" folder exists
dir.create(here("data"), showWarnings = FALSE)
# path to the file you want to create
fileName <- here("data", "20250917-tidy-exam-data.txt")
# write df9 as a tab-delimited text file
write_delim(
df9,
file = fileName,   # <-- you need this argument
delim = "\t"
)
