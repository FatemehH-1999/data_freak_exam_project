library(here)
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
# Boxplot – compare median and spread across groups
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
#loading libraries
library(tidyverse)
library(here)
data2 <- read_delim(here("data", "exam_data_tidy1.txt"), delim = " ")
data2 <- read_delim(here("data", "exam_data_tidy_2025-09-08.txt"), delim = " ")
#exploring tidy version of the data se
glimpse(data2)
#A numeric column showing pan_day in weeks
data2 <-
data2 %>%
mutate(pan_week = pan_day/7)
data2
#A numeric column showing multiplication of ct_result and orderset for each person
data2 <-
data2 %>%
mutate(multi_ct_result_orderset = ct_result*orderset) %>%
drop_na(multi_ct_result_orderset)
data2
data <- read_delim(here("data", "exam_data_tidy_2025-09-08.txt"), delim = "\t") %>%
summarise(across(everything(), ~sum(is.na(.)))) %>%
pivot_longer(cols = everything(),
names_to = "variable",
values_to = "missing_count") %>%
mutate(missing_percent = 100 * missing_count / nrow(data)) %>%
arrange(desc(missing_percent))
data
#Task4_Fatemeh
#Create plots that would help answer these questions:
##Does the distribution of the ct_result differ with sex group?
library(tidyverse)
library(here)
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
data
View(data)
# Boxplot: compares medians & spread
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot: shows full distribution shape
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Density plot: both groups overlaid
ggplot(data, aes(x = ct_result, colour = gender, fill = gender)) +
geom_density(alpha = 0.4) +
labs(title = "Density of ct_result by gender",
x = "ct_result",
y = "Density") +
theme_minimal()
#Question 4 Does the time spent waiting for the test result improve during these 100 days that the dataset includes?
#need to find correlation between rec_ver_tat and pan_day
#I cannot find improvement and the correlation matrix shows almost no correlation (r=0.01)
merged_data %>%
ggplot(aes(x = pan_day, y = rec_ver_tat)) +
geom_point(alpha = 0.4, color = "steelblue") +     # scatterplot of points
geom_smooth(method = "loess", se = TRUE, color = "red") +  # smooth trend line
labs(
title = "Change in waiting time for test results over 100 days",
x = "Day after start of pandemic",
y = "Waiting time (receive → verification)"
) +
theme_minimal()
#Day6
library(tidyverse)
library(here)
#Read the .txt file from the folder
exam_data_tidy <- read_delim(here("data", "exam_data_tidy.txt"), delim = " ")
library(tidyverse)
library(here)
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
# Boxplot – compare median and spread across groups
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Overlaid density curves – all groups on the same axis
ggplot(data, aes(x = ct_result, colour = result, fill = result)) +
geom_density(alpha = 0.4) +
labs(title = "Density of ct_result by outcome group",
x = "ct_result",
y = "Density") +
theme_minimal()
# Boxplot – compare median and spread across groups
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
#Loading libraries
install.packages("ggridges")
library(tidyverse)
library(here)
library(GGally)
library(ggridges)
#loading post-tidied data set
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
# Boxplot – compare median and spread across groups
##Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
#Is the age of the individual associated with whether the test result is negative or positive?
ggplot(data1, aes(x = result, y = age, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot representing the age distribution of a corona test result",
x = "",
y = "age") +
theme_minimal() +
theme(legend.position = "none")
#loading post-tidied data set
data1 <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
#Is the age of the individual associated with whether the test result is negative or positive?
ggplot(data1, aes(x = result, y = age, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot representing the age distribution of a corona test result",
x = "",
y = "age") +
theme_minimal() +
theme(legend.position = "none")
# Boxplot – compare median and spread across groups
##Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
#Does the distribution of the ct_result differ with payor_group?
# Violin plot: shows full distribution shape
ggplot(data1, aes(x = payor_group, y = ct_result, fill = payor_group)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of CT results grouped by health care category",
x = "health care",
y = "ct result") +
theme_minimal() +
theme(legend.position = "none") +
ylim(0, 50)
#Ridgeline chart: shows density distribution for all groups
ggplot(data1, aes(y = payor_group, x = ct_result, fill = payor_group, height = after_stat(density))) +
geom_density_ridges(scale = 2, stat = "density") +
scale_y_discrete(expand = c(0.01, 0)) +
scale_x_continuous(expand = c(0.01, 0)) +
theme_ridges() +
labs(title = "Ridgeline chart of CT results grouped by health care category",
x = "ct results",
y = "") +
theme(legend.position = "none") +
xlim(15, 50)
# Boxplot: compares medians & spread
##The boxplot shows that the distribution of ct_result is very similar for females and males, with no obvious difference between the two sex group
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot: shows full distribution shape
##The violin plot indicates that the ct_result distributions for females and males are nearly identical, showing no meaningful difference between the two sex groups
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Density plot: both groups overlaid
##The density plot shows that the ct_result distributions for females and males almost completely overlap
ggplot(data, aes(x = ct_result, colour = gender, fill = gender)) +
geom_density(alpha = 0.4) +
labs(title = "Density of ct_result by gender",
x = "ct_result",
y = "Density") +
theme_minimal()
# Boxplot – compare median and spread across groups
##Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
#Description of code parts----
##loading libraries----
install.packages("ggridges")
library(tidyverse)
library(here)
library(GGally)
library(ggridges)
##loading post-tidied data set----
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
data1 <- data1 %>%
select(-c(ID))
data <- data %>%
select(-c(ID))
x
####Are there any correlated measurements?----
x <- (ggcorr(
data,
method = c("complete.obs", "pearson"),
name = "Legend",
geom = "circle",
max_size = 10,
min_size = 1,
nbreaks = 6,
size = 2.5,
hjust = 0.75,
angle = 0,
palette = "RdBu"
))
x
###Does the time spent waiting for the test result improve during these 100 days that the dataset includes?----
data %>%
ggplot(aes(x = pan_day, y = rec_ver_tat)) +
geom_point(alpha = 0.4, color = "steelblue") +     # scatterplot of points
geom_smooth(method = "loess", se = TRUE, color = "red") +  # smooth trend line
labs(
title = "Change in waiting time for test results over 100 days",
x = "Day after start of pandemic",
y = "Waiting time (receive → verification)"
) +
theme_minimal()
#Were there more females than males that took the test at a drive through?
data %>%
with(table(gender, drive_thru_ind))
#Yes, there were more females (n=3997) than males (n=3912)
data %>%
filter(drive_thru_ind == 1) %>%              # keep only drive-through tests
ggplot(aes(x = gender, fill = gender)) +     # gender on x-axis
geom_bar() +                                 # bar plot of counts
labs(
title = "Drive-through tests by gender",
x = "Gender",
y = "Number of tests at drive thru"
) +
theme_minimal() +
theme(legend.position = "none")              # remove legend (optional)
#Yes, there were more females (n=3997) than males (n=3912)
data %>%
filter(drive_thru_ind == 1) %>%              # keep only drive-through tests
ggplot(aes(x = gender, fill = gender)) +     # gender on x-axis
geom_bar() +                                 # bar plot of counts
labs(
title = "Drive-through tests by gender",
x = "Gender",
y = "Number of tests at drive thru"
) +
theme_minimal() +
theme(legend.position = "none")              # remove legend (optional)
data %>%
filter(drive_thru_ind == 1) %>%              # keep only drive-through tests
ggplot(aes(x = gender, fill = gender)) +     # gender on x-axis
geom_bar() +                                 # bar plot of counts
labs(
title = "Drive-through tests by gender",
x = "Gender",
y = "Number of tests at drive thru"
) +
theme_minimal() +
theme(legend.position = "none")
data
###Fatemeh----
###Does the distribution of the `ct_result` differ with sex group?----
####Violin plot: shows full distribution shape
####The violin plot indicates that the ct_result distributions for females and males are nearly identical, showing no meaningful difference between the two sex groups
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
####Density plot: both groups overlaid
####The density plot shows that the ct_result distributions for females and males almost completely overlap
ggplot(data, aes(x = ct_result, colour = gender, fill = gender)) +
geom_density(alpha = 0.4) +
labs(title = "Density of ct_result by gender",
x = "ct_result",
y = "Density") +
theme_minimal()
###Sebastian----
###Does the distribution of the ct_result differ with payor_group?----
####Violin plot: shows full distribution shape
ggplot(data, aes(x = payor_group, y = ct_result, fill = payor_group)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of CT results grouped by health care category",
x = "health care",
y = "ct result") +
theme_minimal() +
theme(legend.position = "none") +
ylim(0, 50)
####Ridgeline chart: shows density distribution for all groups
ggplot(data, aes(y = payor_group, x = ct_result, fill = payor_group, height = after_stat(density))) +
geom_density_ridges(scale = 2, stat = "density") +
scale_y_discrete(expand = c(0.01, 0)) +
scale_x_continuous(expand = c(0.01, 0)) +
theme_ridges() +
labs(title = "Ridgeline chart of CT results grouped by health care category",
x = "ct results",
y = "") +
theme(legend.position = "none") +
xlim(15, 50)
#Description of code parts----
##loading libraries----
install.packages("ggridges")
library(tidyverse)
library(here)
library(GGally)
library(ggridges)
##loading post-tidied data set----
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
merged_data %>%
with(prop.table(table(result, drive_thru_ind)))
###Pratik----
###Are there more positive tests in the drive-through?----
####Yes, there are more positive tests in the drive-through group both by count (479 versus 386) and proportion (3.1% versus 2.5%)
data %>%
with(table(result, drive_thru_ind))
data %>%
with(prop.table(table(result, drive_thru_ind)))
#Read the .txt file from the folder
exam_data_tidy <- read_delim(here("data", "exam_data_tidy.txt"), delim = " ")
###Fatemeh----
###Is there a difference in the distributions of ct_results between different outcome groups (result)?----
####Boxplot – compare median and spread across groups
####Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
###Fatemeh----
###Is there a difference in the distributions of ct_results between different outcome groups (result)?----
####Boxplot – compare median and spread across groups
####Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
####Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
###Sebastian----
###Is the age of the individual associated with whether the test result is negative or positive?----
####Yes, in general: the younger the person, the more likely it is for the result to be negative.
####50 % of individuals age 10 or younger have negative results. Second most distribution (ca. 25 %) age 10 - ~23. Median at age 10.
####50 % of individuals age 20 or younger have positive results. Second most distribution (ca. 25 %) age 20 - ~27. Median at age 20.
####Individuals with negative results are approx. 10 years younger than individuals with positive result.
ggplot(data1, aes(x = result, y = age, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot representing the age distribution of a corona test result",
x = "",
y = "age") +
theme_minimal() +
theme(legend.position = "none")
###Sebastian----
###Is the age of the individual associated with whether the test result is negative or positive?----
####Yes, in general: the younger the person, the more likely it is for the result to be negative.
####50 % of individuals age 10 or younger have negative results. Second most distribution (ca. 25 %) age 10 - ~23. Median at age 10.
####50 % of individuals age 20 or younger have positive results. Second most distribution (ca. 25 %) age 20 - ~27. Median at age 20.
####Individuals with negative results are approx. 10 years younger than individuals with positive result.
ggplot(data, aes(x = result, y = age, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot representing the age distribution of a corona test result",
x = "",
y = "age") +
theme_minimal() +
theme(legend.position = "none")
##Loading libraries
library(tidyverse)
library(here)
##Loading tidied dataset
data <- read_delim(here("data", "exam_data_tidier_2025-09-09.txt"), delim = " ")
# Violin plot: shows full distribution shape
##The violin plot indicates that the ct_result distributions for females and males are nearly identical, showing no meaningful difference between the two sex groups
ggplot(data, aes(x = gender, y = ct_result, fill = gender)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.1, fill = "white") +
labs(title = "Violin plot of ct_result by gender",
x = "gender",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Density plot: both groups overlaid
##The density plot shows that the ct_result distributions for females and males almost completely overlap
ggplot(data, aes(x = ct_result, colour = gender, fill = gender)) +
geom_density(alpha = 0.4) +
labs(title = "Density of ct_result by gender",
x = "ct_result",
y = "Density") +
theme_minimal()
# Boxplot – compare median and spread across groups
##Yes, ct_result values are lower in positive cases and higher in negative ones, with no data for the invalid group.
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_boxplot(alpha = 0.7, outlier.color = "red") +
labs(title = "Distribution of ct_result across outcome groups",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
# Violin plot – show full distribution shape
ggplot(data, aes(x = result, y = ct_result, fill = result)) +
geom_violin(trim = FALSE, alpha = 0.6) +
geom_boxplot(width = 0.2, fill = "white") +
labs(title = "Violin plot of ct_result by outcome group",
x = "Outcome group (result)",
y = "ct_result") +
theme_minimal() +
theme(legend.position = "none")
